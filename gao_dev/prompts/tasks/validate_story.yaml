name: validate_story
description: "Task prompt for story validation by Murat"
version: 2.0.0

user_prompt: |
  Use the Murat agent to validate Story {{epic}}.{{story}}.

  ### Accessing Context via AgentContextAPI

  Before starting validation, set up the WorkflowContext and AgentContextAPI:

  ```python
  from gao_dev.core.context.context_api import set_workflow_context, get_workflow_context, AgentContextAPI
  from gao_dev.core.context.workflow_context import WorkflowContext
  import uuid

  # Create and set WorkflowContext
  context = WorkflowContext(
      workflow_id=str(uuid.uuid4()),
      epic_num={{epic}},
      story_num={{story}},
      feature="{{feature}}",
      workflow_name="validate_story"
  )
  set_workflow_context(context)

  # Initialize AgentContextAPI for document access
  api = AgentContextAPI(context)

  # Access documents (lazy-loaded, cached, tracked)
  epic_def = api.get_epic_definition()
  architecture = api.get_architecture()
  story_def = api.get_story_definition()
  acceptance_criteria = api.get_acceptance_criteria()
  coding_standards = api.get_coding_standards()
  ```

  Story Definition:
  @doc:stories/epic-{{epic}}/story-{{epic}}.{{story}}.md

  Acceptance Criteria:
  @doc:stories/epic-{{epic}}/story-{{epic}}.{{story}}.md#acceptance-criteria

  Quality Checklists:
  @checklist:testing/qa-comprehensive
  @checklist:code-quality/code-review-checklist
  @checklist:testing/unit-test-standards

  Murat should:
  1. Read the story definition and acceptance criteria above
  2. Verify all acceptance criteria are documented and met
  3. Check that tests exist and pass
  4. Verify code coverage meets requirements (target: 80%+)
  5. Check code quality against the checklists (linting, type hints, SOLID principles)
  6. Verify tests follow unit test standards
  7. Report validation results (PASS/FAIL)
  8. If FAIL, document what needs to be fixed with specific checklist items

variables:
  epic: "1"
  story: "1"
  agent: "Murat"
  feature: ""

response:
  max_tokens: 4000
  temperature: 0.7

metadata:
  category: task
  phase: validation
  agent: Murat

meta_prompts:
  enabled: true
