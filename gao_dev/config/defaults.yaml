# Default GAO-Dev Configuration

# ============================================================================
# Workflow Variable Defaults
# ============================================================================
# These defaults provide sensible out-of-the-box values for workflow variables.
# Workflows will use these defaults when variables are not provided via parameters
# or defined in workflow.yaml files.
#
# Priority order for variable resolution:
#   1. Parameters (passed to execute method)
#   2. Workflow.yaml variables section
#   3. Config defaults (this section)
#   4. Common variables (date, timestamp)
#
# Projects can override these defaults by creating a local gao-dev.yaml file
# with a workflow_defaults section.

workflow_defaults:
  # Document locations following GAO-Dev project structure conventions

  # Product Requirements Document location
  prd_location: "docs/PRD.md"

  # System architecture documentation location
  architecture_location: "docs/ARCHITECTURE.md"

  # Technical specification document location
  tech_spec_location: "docs/TECHNICAL_SPEC.md"

  # Directory for development stories
  dev_story_location: "docs/stories"

  # Epic tracking document location
  epic_location: "docs/epics.md"

  # Default output folder for all documentation
  output_folder: "docs"

  # Sprint status tracking file
  sprint_status_location: "docs/sprint-status.yaml"

  # Workflow status tracking file
  workflow_status_location: "docs/bmm-workflow-status.md"

  # Context XML folder for story context
  context_xml_folder: "docs/stories/{epic}/context"

# ============================================================================
# Document Lifecycle Configuration
# ============================================================================
# Configuration for document lifecycle management and tracking.

document_lifecycle:
  # Directory for archived documents
  archive_dir: ".archive"

  # Automatically register workflow artifacts
  auto_register: true

  # Directory for document lifecycle database
  lifecycle_dir: ".gao-dev"

# ============================================================================
# Project Structure (Legacy - Deprecated)
# ============================================================================
# These top-level config values are deprecated. Use workflow_defaults instead.
# Kept for backward compatibility.

output_folder: "docs"
dev_story_location: "docs/stories"
context_xml_folder: "docs/stories/{epic}/context"
architecture_location: "docs/architecture.md"
prd_location: "docs/PRD.md"
epics_location: "docs/epics.md"

# Git Settings
git_auto_commit: true
git_branch_prefix: "feature/epic"
git_commit_footer: |

  ðŸ¤– Generated with GAO-Dev
  Co-Authored-By: Claude <noreply@anthropic.com>

# Quality Settings
qa_enabled: true
test_coverage_threshold: 80
type_safety_required: true

# Workflow Settings
workflow_validation: true
phase_gates_enabled: true
story_approval_required: true

# Logging
log_level: "INFO"
log_format: "json"

# Claude Settings
claude_model: "claude-sonnet-4"
claude_max_tokens: 8000

# Feature Flags
features:
  # Provider abstraction system (Epic 11)
  # Set to true after Phase 1 validation complete
  provider_abstraction_enabled: false

# Provider Configuration (Epic 11)
providers:
  # Default provider for all agents (can be overridden per-agent)
  default: "claude-code"

  # Auto-detection settings
  auto_detect: true
  auto_fallback: true

  # Fallback chain if primary provider fails
  fallback_chain:
    - "claude-code"
    - "opencode"
    - "direct-api"

  # Selection strategy: "auto", "performance", "cost", "availability", "composite"
  selection:
    strategy: "auto"

    # Composite strategy weights (if strategy: "composite")
    composite_weights:
      performance: 0.6
      cost: 0.3
      availability: 0.1

    # Performance tracker settings
    performance:
      enabled: true
      cache_duration: 3600  # 1 hour

    # Health check settings
    health:
      enabled: true
      cache_duration: 300   # 5 minutes
      check_interval: 60    # Check every minute

  # Provider-specific configuration
  claude-code:
    cli_path: null  # Auto-detect if null
    api_key_env: "ANTHROPIC_API_KEY"
    default_model: "sonnet-4.5"
    timeout: 3600

  opencode:
    cli_path: null  # Auto-detect if null
    ai_provider: "anthropic"  # anthropic, openai, google
    api_key_env: "ANTHROPIC_API_KEY"
    default_model: "sonnet-4.5"
    timeout: 3600

  direct-api:
    provider: "anthropic"  # anthropic, openai, google
    api_key_env: "ANTHROPIC_API_KEY"
    base_url: null  # Optional override
    default_model: "sonnet-4.5"
    timeout: 3600
    max_retries: 3
    retry_delay: 1.0

# Model Name Registry
# Defines canonical model names and their provider-specific translations
models:
  registry:
    # Claude models
    - canonical: "sonnet-4.5"
      description: "Claude Sonnet 4.5 (Latest, most capable)"
      providers:
        claude-code: "claude-sonnet-4-5-20250929"
        opencode: "anthropic/claude-sonnet-4.5"
        direct-api: "claude-sonnet-4-5-20250929"

    - canonical: "sonnet-3.5"
      description: "Claude Sonnet 3.5"
      providers:
        claude-code: "claude-sonnet-3-5-20241022"
        opencode: "anthropic/claude-sonnet-3.5"
        direct-api: "claude-sonnet-3-5-20241022"

    - canonical: "opus-3"
      description: "Claude Opus 3 (Most capable, expensive)"
      providers:
        claude-code: "claude-opus-3-20250219"
        opencode: "anthropic/claude-opus-3"
        direct-api: "claude-opus-3-20250219"

    - canonical: "haiku-3"
      description: "Claude Haiku 3 (Fast, cost-effective)"
      providers:
        claude-code: "claude-haiku-3-20250219"
        opencode: "anthropic/claude-haiku-3"
        direct-api: "claude-haiku-3-20250219"

    # OpenAI models (OpenCode and Direct API only)
    - canonical: "gpt-4"
      description: "OpenAI GPT-4"
      providers:
        opencode: "openai/gpt-4"
        direct-api: "gpt-4-0125-preview"

    - canonical: "gpt-4-turbo"
      description: "OpenAI GPT-4 Turbo"
      providers:
        opencode: "openai/gpt-4-turbo-preview"
        direct-api: "gpt-4-turbo-preview"

    # Google models (OpenCode and Direct API only)
    - canonical: "gemini-pro"
      description: "Google Gemini Pro"
      providers:
        opencode: "google/gemini-pro"
        direct-api: "models/gemini-pro"

# Plugin Settings
plugins:
  enabled: true
  auto_discover: true
  directories:
    - ./plugins
    - ~/.gao-dev/plugins
  security:
    sandboxing: true
    allowed_modules: []
