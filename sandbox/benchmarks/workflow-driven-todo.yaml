# Workflow-Driven Todo App Benchmark (Epic 7.2 Format)
#
# This benchmark tests the Epic 7.2 workflow-driven architecture:
# - Brian agent selects appropriate workflows
# - Scale-adaptive routing based on project complexity
# - Multi-workflow sequencing
# - Autonomous artifact creation
#
# The benchmark provides WHAT to build (initial_prompt)
# GAO-Dev + Brian decide HOW to build it (workflow selection)

benchmark:
  name: "workflow-driven-todo"
  description: "Test Epic 7.2 workflow-driven architecture with autonomous todo app creation"
  version: "1.0.0"

  # THE ONLY REQUIRED INPUT: What to build
  initial_prompt: |
    Build a COMPLETE, WORKING, END-TO-END production-ready todo application.

    IMPORTANT: Implement ALL features and ALL stories until you have a fully functional MVP that can be run and tested.
    Do not stop after one story - continue implementing stories until the entire application is complete and working.

    Features (ALL must be implemented):
    - User authentication (register, login, logout)
    - CRUD operations for tasks (create, read, update, delete)
    - Task categories/tags
    - Due dates and reminders
    - Mark tasks as complete/incomplete
    - Filter tasks by status, category, due date
    - Responsive UI that works on desktop and mobile

    Technical Requirements:
    - Backend: Python with FastAPI
    - Frontend: React with TypeScript
    - Database: PostgreSQL (or SQLite for MVP)
    - Authentication: JWT tokens
    - API: RESTful endpoints with OpenAPI docs
    - Testing: >80% code coverage
    - Code quality: Type hints, linting (ruff), formatted (black)
    - Deployment: Docker compose for local development

    Deliverables (ALL must be completed):
    - Complete project documentation (PRD, architecture, API docs)
    - Production-ready code with tests
    - Database schema and migrations
    - Docker setup for easy deployment
    - README with setup instructions
    - Working application that can be started with: docker-compose up

    SUCCESS CRITERIA: The final deliverable must be a working application that can be started and used immediately.

  # Optional: Force specific workflow (for testing)
  # Omit this to let Brian select automatically
  # workflow_name: "greenfield-full-development"

  # Optional: Scale level hint (0-4)
  # If omitted, Brian will infer from prompt
  scale_level: 3  # Level 3: Large project (12-40 stories, 2-5 epics)

  # Expected duration (for reporting, not a hard timeout)
  expected_duration_minutes: 360

  # Hard timeout (will stop execution)
  timeout_seconds: 21600  # 6 hours

  # Success criteria (evaluated after completion)
  success_criteria:
    # Minimum test coverage
    min_test_coverage: 80.0

    # Maximum manual interventions allowed
    max_manual_interventions: 0

    # Maximum errors allowed
    max_errors: 0

    # Required features/artifacts
    required_features:
      - "docs/PRD.md"
      - "docs/ARCHITECTURE.md"
      - "docs/API.md"
      - "backend/**/*.py"
      - "frontend/**/*.tsx"
      - "tests/**/*.py"
      - "docker-compose.yml"
      - "README.md"

    # Quality gates
    quality_gates:
      tests_must_pass: true
      build_must_succeed: true
      min_commits: 5
      commit_format: "conventional"
      linting_tool: "ruff"
      type_checking_tool: "mypy"
      formatting_tool: "black"

  # Optional metadata
  metadata:
    project_type: "greenfield"  # greenfield, enhancement, bug_fix
    complexity: "medium"  # simple, medium, complex
    language: "python"
    framework: "fastapi"
    epic: "7.2"  # Testing Epic 7.2
    test_mode: "integration"  # This is an integration test

    # Tags for filtering/reporting
    tags:
      - epic-7.2
      - workflow-driven
      - greenfield
      - todo-app
      - full-stack
      - python
      - fastapi
      - react
